import { LLMChain } from "../../chains/llm_chain.js";
import { PromptTemplate } from "../../prompts/index.js";
import { BaseChain } from "../../chains/base.js";
import { Document } from "../../document.js";
import { TimeWeightedVectorStoreRetriever } from "../../retrievers/time_weighted.js";
import { BaseMemory, InputValues, OutputValues } from "../../memory/base.js";
import { CallbackManagerForChainRun, Callbacks } from "../../callbacks/manager.js";
import { BaseLanguageModel } from "../../base_language/index.js";
import { ChainValues } from "../../schema/index.js";
export type GenerativeAgentMemoryConfig = {
    reflectionThreshold?: number;
    importanceWeight?: number;
    verbose?: boolean;
    maxTokensLimit?: number;
};
declare class GenerativeAgentMemoryChain extends BaseChain {
    reflecting: boolean;
    reflectionThreshold?: number;
    importanceWeight: number;
    memoryRetriever: TimeWeightedVectorStoreRetriever;
    llm: BaseLanguageModel;
    verbose: boolean;
    private aggregateImportance;
    constructor(llm: BaseLanguageModel, memoryRetriever: TimeWeightedVectorStoreRetriever, config: Omit<GenerativeAgentMemoryConfig, "maxTokensLimit">);
    _chainType(): string;
    get inputKeys(): string[];
    get outputKeys(): string[];
    chain(prompt: PromptTemplate): LLMChain;
    _call(values: ChainValues, runManager?: CallbackManagerForChainRun): Promise<{
        output: number;
    }>;
    pauseToReflect(now?: Date, runManager?: CallbackManagerForChainRun): Promise<string[]>;
    scoreMemoryImportance(memoryContent: string, runManager?: CallbackManagerForChainRun): Promise<number>;
    getTopicsOfReflection(lastK: number, runManager?: CallbackManagerForChainRun): Promise<string[]>;
    getInsightsOnTopic(topic: string, now?: Date, runManager?: CallbackManagerForChainRun): Promise<string[]>;
    static parseList(text: string): string[];
    fetchMemories(observation: string, _now?: Date, runManager?: CallbackManagerForChainRun): Promise<Document[]>;
}
export declare class GenerativeAgentMemory extends BaseMemory {
    llm: BaseLanguageModel;
    memoryRetriever: TimeWeightedVectorStoreRetriever;
    verbose: boolean;
    reflectionThreshold?: number;
    private maxTokensLimit;
    queriesKey: string;
    mostRecentMemoriesTokenKey: string;
    addMemoryKey: string;
    relevantMemoriesKey: string;
    relevantMemoriesSimpleKey: string;
    mostRecentMemoriesKey: string;
    nowKey: string;
    memoryChain: GenerativeAgentMemoryChain;
    constructor(llm: BaseLanguageModel, memoryRetriever: TimeWeightedVectorStoreRetriever, config?: GenerativeAgentMemoryConfig);
    getRelevantMemoriesKey(): string;
    getMostRecentMemoriesTokenKey(): string;
    getAddMemoryKey(): string;
    getCurrentTimeKey(): string;
    get memoryKeys(): string[];
    addMemory(memoryContent: string, now?: Date, metadata?: Record<string, unknown>, callbacks?: Callbacks): Promise<ChainValues>;
    formatMemoriesDetail(relevantMemories: Document[]): string;
    formatMemoriesSimple(relevantMemories: Document[]): string;
    getMemoriesUntilLimit(consumedTokens: number): Promise<string>;
    get memoryVariables(): string[];
    loadMemoryVariables(inputs: InputValues): Promise<Record<string, string>>;
    saveContext(_inputs: InputValues, outputs: OutputValues): Promise<void>;
    clear(): void;
}
export {};
